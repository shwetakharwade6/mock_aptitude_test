<!--
Mock Aptitude Test - Single-file web app
Filename: index.html

This is a single-file HTML/CSS/JS app — all files in one. You can save this as `index.html` and upload to the root of a GitHub repository.

Features:
- Single page, no build tools
- Multiple-choice questions (question bank included)
- Timer, progress bar, per-question review flag
- Keyboard shortcuts: N (next), P (prev), R (toggle review), S (submit)
- Export results (JSON) & copy to clipboard
- Responsive and accessible UI

How to upload to GitHub quickly:
1. Create a new repository on GitHub (e.g., mock-aptitude-test).
2. Add `index.html` to the repository root (Upload files or push via git).
3. Optionally enable GitHub Pages in repository Settings → Pages → choose branch `main` and root `/`.
4. After a minute the site will be available at: https://<your-username>.github.io/<repo-name>/

Want me to add: more questions, user login, CSV export, or timer presets? Say which feature and I will update the single file.
-->

<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Mock Aptitude Test</title>
  <style>
    :root{--bg:#0f1724;--card:#0b1220;--muted:#9aa4b2;--accent:#7c3aed;--success:#16a34a;--danger:#ef4444}
    *{box-sizing:border-box}
    html,body{height:100%;margin:0;font-family:Inter,system-ui,-apple-system,"Segoe UI",Roboto,'Helvetica Neue',Arial;color:#e6eef6;background:linear-gradient(180deg,#071029 0%, #06203a 100%);}
    .wrap{max-width:980px;margin:28px auto;padding:20px}
    .card{background:linear-gradient(180deg,rgba(255,255,255,0.02), rgba(255,255,255,0.01));border-radius:12px;padding:20px;box-shadow:0 8px 30px rgba(2,6,23,0.6);}
    header{display:flex;align-items:center;justify-content:space-between;margin-bottom:14px}
    h1{font-size:20px;margin:0}
    .meta{color:var(--muted);font-size:13px}
    .controls{display:flex;gap:8px;align-items:center}
    button{background:transparent;color:#e6eef6;border:1px solid rgba(255,255,255,0.06);padding:8px 12px;border-radius:8px;cursor:pointer}
    button.primary{background:linear-gradient(90deg,var(--accent),#5b21b6);border:none}
    .grid{display:grid;grid-template-columns:1fr 320px;gap:18px}
    @media(max-width:920px){.grid{grid-template-columns:1fr}}

    .question-area{padding:14px;background:linear-gradient(180deg,rgba(255,255,255,0.01),transparent);border-radius:10px}
    .q-head{display:flex;justify-content:space-between;align-items:center;margin-bottom:12px}
    .q-text{font-size:16px;margin-bottom:10px}
    .options{display:flex;flex-direction:column;gap:10px}
    .option{padding:12px;border-radius:10px;border:1px solid rgba(255,255,255,0.04);cursor:pointer;display:flex;align-items:center}
    .option input{margin-right:10px}
    .option.selected{outline:2px solid rgba(124,58,237,0.18);background:rgba(124,58,237,0.04)}

    .sidebar{position:relative;padding:12px;background:linear-gradient(180deg,rgba(255,255,255,0.01),transparent);border-radius:10px;height:100%}
    .timer{font-weight:600;font-size:18px}
    .progress{height:10px;background:rgba(255,255,255,0.03);border-radius:10px;margin-top:8px;overflow:hidden}
    .progress > i{display:block;height:100%;background:linear-gradient(90deg,var(--accent),#4f46e5);width:0%}
    .qgrid{display:grid;grid-template-columns:repeat(5,1fr);gap:6px;margin-top:12px}
    .qnum{padding:8px;border-radius:6px;text-align:center;cursor:pointer;border:1px solid rgba(255,255,255,0.03)}
    .qnum.answered{background:rgba(16,185,129,0.12);border-color:rgba(16,185,129,0.2)}
    .qnum.current{outline:2px solid rgba(124,58,237,0.14)}
    .qnum.review{box-shadow:inset 0 0 0 2px rgba(245,158,11,0.06)}
    .footer{display:flex;justify-content:space-between;align-items:center;margin-top:12px}
    .note{color:var(--muted);font-size:13px}
    .results{padding:12px;border-radius:10px;background:linear-gradient(180deg,rgba(0,0,0,0.2),transparent);margin-top:12px}
    .result-row{display:flex;justify-content:space-between;padding:10px 0;border-bottom:1px dashed rgba(255,255,255,0.03)}
    .small{font-size:13px;color:var(--muted)}

    /* feedback */
    .correct{color:var(--success);font-weight:700}
    .wrong{color:var(--danger);font-weight:700}

    /* accessibility focus */
    .option:focus{outline:2px dashed rgba(124,58,237,0.2)}
  </style>
</head>
<body>
  <div class="wrap">
    <div class="card" role="application" aria-labelledby="title">
      <header>
        <div>
          <h1 id="title">Mock Aptitude Test</h1>
          <div class="meta">Total questions: <span id="totalQs">0</span> • Duration: <span id="durationLabel">10:00</span></div>
        </div>
        <div class="controls">
          <button id="btnReview" title="Toggle review flag (R)">Mark for review</button>
          <button id="btnExport">Export Results</button>
          <button id="btnCopy">Copy Results</button>
          <button id="btnSubmit" class="primary">Submit (S)</button>
        </div>
      </header>

      <div class="grid">
        <main>
          <section class="question-area">
            <div class="q-head">
              <div>Question <span id="curIndex">1</span> of <span id="totalQ2">0</span></div>
              <div class="small">Score so far: <span id="scoreSmall">0</span></div>
            </div>
            <div class="q-text" id="qText">Loading...</div>
            <div class="options" id="options"></div>

            <div class="footer">
              <div>
                <button id="prevBtn">Previous (P)</button>
                <button id="nextBtn">Next (N)</button>
              </div>
              <div class="note">Use keyboard shortcuts: N-next, P-prev, R-review, S-submit</div>
            </div>

            <div id="feedbackArea"></div>
          </section>

          <section id="resultsArea" style="display:none" class="results" aria-live="polite"></section>
        </main>

        <aside class="sidebar">
          <div style="display:flex;justify-content:space-between;align-items:center">
            <div>
              <div class="small">Time left</div>
              <div class="timer" id="timer">--:--</div>
            </div>
            <div style="text-align:right">
              <div class="small">Answered</div>
              <div id="answeredCount">0</div>
            </div>
          </div>

          <div class="progress" aria-hidden="true"><i id="progFill"></i></div>

          <div style="margin-top:12px">
            <div class="small">Questions</div>
            <div class="qgrid" id="qGrid"></div>
          </div>

        </aside>
      </div>
    </div>
  </div>

  <script>
    // ---------- Configuration ----------
    const CONFIG = {
      durationSec: 10 * 60, // default duration in seconds (10 minutes)
      showPerQuestionFeedback: true,
      allowNavigationAfterSubmit: true
    }

    // ---------- Question bank ----------
    // Each question: {id, q, choices: [], answer: index, explanation(optional)}
    const QUESTIONS = [
      {id:1, q:"What is the output of: printf(\"%d\", 3 + 4 * 2); ?", choices:["14","11","10","9"], answer:1, explanation:"Multiplication before addition: 4*2=8, +3 =11."},
      {id:2, q:"If ratio of A:B is 3:4 and B:C is 2:5, what is A:C?", choices:["6:20","3:10","6:25","5:6"], answer:1, explanation:"Scale B to common value: A:C = 3:10."},
      {id:3, q:"Which data structure provides FIFO behavior?", choices:["Stack","Queue","Tree","Graph"], answer:1},
      {id:4, q:"What is the time complexity of binary search on a sorted array of n elements?", choices:["O(n)","O(log n)","O(n log n)","O(1)"], answer:1},
      {id:5, q:"What is the result of 5 & 3 (bitwise AND)?", choices:["7","1","5","3"], answer:1, explanation:"5(101) & 3(011) = 001 => 1."},
      {id:6, q:"Solve: If 5x + 3 = 23, then x = ?", choices:["2","3","4","5"], answer:3},
      {id:7, q:"Which SQL command is used to remove a table and its data?", choices:["DELETE","TRUNCATE","DROP","REMOVE"], answer:2, explanation:"DROP TABLE removes the table definition and data."},
      {id:8, q:"In networking, what does TCP stand for?", choices:["Transfer Control Protocol","Transmission Control Protocol","Transport Control Protocol","Transmission Communication Protocol"], answer:1},
      {id:9, q:"If probability of event A is 0.2 and B is 0.3 independent, P(A and B) = ?", choices:["0.06","0.5","0.3","0.2"], answer:0},
      {id:10, q:"Which sorting algorithm has average-case O(n log n) and is stable?", choices:["Quick Sort","Selection Sort","Merge Sort","Heap Sort"], answer:2, explanation:"Merge sort is stable and O(n log n)."},
      {id:11, q:"What's the output: console.log(typeof NaN) in JavaScript?", choices:["'number'","'NaN'","'undefined'","'object'"], answer:0, explanation:"typeof NaN is 'number' in JS."},
      {id:12, q:"Find the missing number series: 2, 6, 12, 20, ?", choices:["30","26","28","24"], answer:0, explanation:"n-th term is n*(n+1): 5*6=30."},
      {id:13, q:"Which of the following is NOT a programming paradigm?", choices:["Procedural","Functional","Circular","Object-oriented"], answer:2},
      {id:14, q:"What's the next in series: 3, 9, 27, ?", choices:["54","81","72","36"], answer:1},
      {id:15, q:"Which HTTP status code means Not Found?", choices:["200","301","404","500"], answer:2},
      {id:16, q:"What does CSS stand for?", choices:["Cascading Style Sheets","Computer Style Sheets","Creative Style System","Cascade Styling System"], answer:0},
      {id:17, q:"Which of these is a MIN-heap property?", choices:["Parent >= children","Parent <= children","Parent == children","No relation"], answer:1},
      {id:18, q:"If a train covers 60 km in 1.5 hours, its speed is?", choices:["40 km/h","45 km/h","35 km/h","50 km/h"], answer:0},
      {id:19, q:"Which is best for key-value storage with high throughput?", choices:["Relational DB","In-memory cache","File system","Spreadsheet"], answer:1},
      {id:20, q:"C language: which header is required for printf?", choices:["<stdlib.h>","<stdio.h>","<string.h>","<math.h>"], answer:1},
      {id:21, q:"What is 15% of 200?", choices:["20","25","30","35"], answer:2},
      {id:22, q:"Which loop will run at least once?", choices:["for","while","do...while","foreach"], answer:2},
      {id:23, q:"If x^2 = 49 and x>0 then x = ?", choices:["-7","7","0","Cannot determine"], answer:1},
      {id:24, q:"Which HTTP method is idempotent?", choices:["POST","PUT","PATCH","CONNECT"], answer:1},
      {id:25, q:"Which data type typically uses 64 bits?", choices:["float","double","short","char"], answer:1}
    ];

    // ---------- App State ----------
    const state = {
      cur: 0,
      answers: Array(QUESTIONS.length).fill(null),
      review: Array(QUESTIONS.length).fill(false),
      startTs: null,
      remaining: CONFIG.durationSec,
      submitted: false
    }

    // ---------- DOM refs ----------
    const qText = document.getElementById('qText');
    const optionsEl = document.getElementById('options');
    const curIndex = document.getElementById('curIndex');
    const totalQ2 = document.getElementById('totalQ2');
    const totalQs = document.getElementById('totalQs');
    const prevBtn = document.getElementById('prevBtn');
    const nextBtn = document.getElementById('nextBtn');
    const timerEl = document.getElementById('timer');
    const progFill = document.getElementById('progFill');
    const qGrid = document.getElementById('qGrid');
    const answeredCount = document.getElementById('answeredCount');
    const btnReview = document.getElementById('btnReview');
    const btnSubmit = document.getElementById('btnSubmit');
    const btnExport = document.getElementById('btnExport');
    const btnCopy = document.getElementById('btnCopy');
    const feedbackArea = document.getElementById('feedbackArea');
    const resultsArea = document.getElementById('resultsArea');
    const scoreSmall = document.getElementById('scoreSmall');
    const durationLabel = document.getElementById('durationLabel');

    // ---------- Initialization ----------
    function init(){
      totalQs.textContent = QUESTIONS.length;
      totalQ2.textContent = QUESTIONS.length;
      durationLabel.textContent = formatTime(CONFIG.durationSec);
      renderQuestion(0);
      renderQGrid();
      state.startTs = Date.now();
      startTimer();
      bindKeys();
    }

    function renderQuestion(idx){
      state.cur = idx;
      const q = QUESTIONS[idx];
      curIndex.textContent = idx+1;
      qText.textContent = q.q;
      optionsEl.innerHTML = '';
      q.choices.forEach((c,i)=>{
        const div = document.createElement('div');
        div.className = 'option';
        div.tabIndex = 0;
        if(state.answers[idx] === i) div.classList.add('selected');
        div.innerHTML = `<input type='radio' name='opt' value='${i}' aria-label='option ${i+1}' ${state.answers[idx]===i? 'checked':''}><div>${c}</div>`;
        div.onclick = ()=> selectOption(idx,i);
        div.onkeydown = (e)=>{ if(e.key==='Enter') selectOption(idx,i)};
        optionsEl.appendChild(div);
      });
      updateUIState();
    }

    function selectOption(qi, optionIdx){
      if(state.submitted) return;
      state.answers[qi] = optionIdx;
      renderQuestion(qi);
      renderQGrid();
    }

    function renderQGrid(){
      qGrid.innerHTML = '';
      QUESTIONS.forEach((q,i)=>{
        const b = document.createElement('div');
        b.className = 'qnum';
        if(state.answers[i] !== null) b.classList.add('answered');
        if(state.cur === i) b.classList.add('current');
        if(state.review[i]) b.classList.add('review');
        b.textContent = i+1;
        b.onclick = ()=> renderQuestion(i);
        qGrid.appendChild(b);
      });
      answeredCount.textContent = state.answers.filter(x=>x!==null).length;
      const pct = Math.round((state.answers.filter(x=>x!==null).length / QUESTIONS.length)*100);
      progFill.style.width = pct + '%';
    }

    function prev(){ if(state.cur>0) renderQuestion(state.cur-1); }
    function next(){ if(state.cur<QUESTIONS.length-1) renderQuestion(state.cur+1); }

    btnReview.onclick = ()=>{ state.review[state.cur] = !state.review[state.cur]; renderQGrid(); }
    prevBtn.onclick = prev;
    nextBtn.onclick = next;

    function bindKeys(){
      document.addEventListener('keydown', (e)=>{
        if(e.target.tagName === 'INPUT' || e.target.tagName === 'TEXTAREA') return;
        const k = e.key.toLowerCase();
        if(k==='n') next();
        if(k==='p') prev();
        if(k==='r') { state.review[state.cur] = !state.review[state.cur]; renderQGrid(); }
        if(k==='s') submit();
      });
    }

    function startTimer(){
      updateTimerDisplay();
      state.timerId = setInterval(()=>{
        state.remaining--;
        if(state.remaining<=0){ clearInterval(state.timerId); submit(); }
        updateTimerDisplay();
      },1000);
    }

    function updateTimerDisplay(){
      timerEl.textContent = formatTime(state.remaining);
      const pct = Math.max(0, Math.round((state.remaining/CONFIG.durationSec)*100));
      progFill.style.width = pct + '%';
    }

    function formatTime(sec){
      const m = Math.floor(sec/60); const s = sec%60;
      return String(m).padStart(2,'0') + ':' + String(s).padStart(2,'0');
    }

    function updateUIState(){
      // highlight selected option visually
      Array.from(optionsEl.children).forEach((el,idx)=>{
        if(state.answers[state.cur]===idx) el.classList.add('selected'); else el.classList.remove('selected');
      });
    }

    // ---------- Submit & Scoring ----------
    function submit(){
      if(state.submitted) return;
      state.submitted = true;
      clearInterval(state.timerId);
      // compute score
      let score = 0;
      const details = QUESTIONS.map((q,i)=>{
        const correct = q.answer;
        const given = state.answers[i];
        const isCorrect = given === correct;
        if(isCorrect) score++;
        return {id:q.id, q:q.q, given, correct, isCorrect, explanation: q.explanation || null, choices: q.choices};
      });
      showResults(score, details);
    }

    btnSubmit.onclick = submit;

    function showResults(score, details){
      resultsArea.style.display = 'block';
      resultsArea.innerHTML = '';
      const heading = document.createElement('div');
      heading.innerHTML = `<h2>Result: ${score} / ${QUESTIONS.length}</h2><div class='small'>Correct: ${score} • Incorrect: ${QUESTIONS.length - score}</div>`;
      resultsArea.appendChild(heading);
      const list = document.createElement('div');
      details.forEach((d,i)=>{
        const row = document.createElement('div'); row.className='result-row';
        const left = document.createElement('div'); left.innerHTML = `<div><strong>Q${i+1}.</strong> ${d.q}</div><div class='small'>Your answer: ${d.given===null? '—' : d.choices[d.given]}</div>`;
        const right = document.createElement('div');
        right.style.textAlign='right';
        right.innerHTML = `<div>${d.isCorrect? '<span class="correct">Correct</span>' : '<span class="wrong">Wrong</span>'}</div><div class='small'>Answer: ${d.choices[d.correct]}</div>`;
        row.appendChild(left); row.appendChild(right);
        if(d.explanation) {
          const ex = document.createElement('div'); ex.className='small'; ex.style.padding='6px 0'; ex.textContent = 'Explanation: ' + d.explanation; row.appendChild(ex);
        }
        list.appendChild(row);
      });
      resultsArea.appendChild(list);
      scoreSmall.textContent = score;
      // allow export
      window.latestResult = {score, total:QUESTIONS.length, details, timestamp: new Date().toISOString()};
    }

    // ---------- Export / Copy ----------
    btnExport.onclick = ()=>{
      if(!window.latestResult){ alert('No result to export yet. Submit first.'); return; }
      const blob = new Blob([JSON.stringify(window.latestResult, null, 2)], {type:'application/json'});
      const url = URL.createObjectURL(blob);
      const a = document.createElement('a'); a.href = url; a.download = 'mock-aptitude-result.json'; document.body.appendChild(a); a.click(); a.remove(); URL.revokeObjectURL(url);
    }

    btnCopy.onclick = ()=>{
      if(!window.latestResult){ alert('No result to copy yet. Submit first.'); return; }
      navigator.clipboard.writeText(JSON.stringify(window.latestResult, null, 2)).then(()=> alert('Results copied to clipboard'));
    }

    // ---------- Safety / UX ----------
    // Prevent accidental navigation
    window.addEventListener('beforeunload', (e)=>{
      if(!state.submitted) e.returnValue = 'Your test progress will be lost.';
    });

    // Initialize app on DOM ready
    document.addEventListener('DOMContentLoaded', init);
  </script>
</body>
</html>
